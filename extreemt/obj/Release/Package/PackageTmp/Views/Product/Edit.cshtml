@model extreemt.product
@{
    if (!extreemt.tools.isAuthorized(Request.Url.AbsolutePath))
    {
        if (Request.Url.AbsolutePath != Url.Action("Index", "Home"))
        {
            Response.Redirect(Url.Action("Index", "Home"));
            return;
        }
    }
}
@{
    ViewBag.Title = "Edit";
}
<div class="container">


    <h2>Edit</h2>

    @using (Html.BeginForm("Edit", "Product", FormMethod.Post,
      new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>product</legend>

            @Html.HiddenFor(model => model.id)
            <div class="form-group">
                <div class="row">
                    <div class="col-xs-4">
                        <div class="editor-label">
                            @Html.LabelFor(model => model.name)
                        </div>
                        <div class="editor-field">
                            @Html.TextBoxFor(model => model.name, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.name)
                        </div>
                    </div>
                    <div class="col-xs-4">
                        <div class="editor-label">
                            @Html.LabelFor(model => model.description)
                        </div>
                        <div class="editor-field">
                            @Html.TextAreaFor(model => model.description, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.description)
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-4">
                        <div class="editor-label">
                            @Html.LabelFor(model => model.count)
                        </div>
                        <div class="editor-field">
                            @Html.TextBoxFor(model => model.count, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.count)
                        </div>
                    </div>
                    <div class="col-xs-4">
                        <div class="editor-label">
                            @Html.LabelFor(model => model.price)
                        </div>
                        <div class="editor-field">
                            @Html.TextBoxFor(model => model.price, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.price)
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-2">
                        <div class="editor-label">
                            @Html.LabelFor(model => model.categoryId, "category")
                        </div>
                        <div class="editor-field">
                            @Html.DropDownList("categoryId", String.Empty)
                            @Html.ValidationMessageFor(model => model.categoryId)
                        </div>
                    </div>


                </div>
                <br />
                <div class="row">
                    <div class="col-xs-4">
                        <a href="@Url.Action("DeleteAllPhotosEdit", "Product", new { id=Model.id})">Delete Old Photos</a>
                        <br />
                        <label>Add Photos</label>
                        <input type='file' class="form-control" multiple id='fileUpload' name="files[]" />
                    </div>
                </div>
                <br />

                <p>
                    <input type="submit" class="btn btn-default" value="Save" />
                </p>
        </fieldset>
    }

    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
<script>
    $(document).ready(function () {
        $("#categoryId").addClass("form-control");
    });
    </script>
}
